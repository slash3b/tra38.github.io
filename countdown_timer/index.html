<html>
<head></head>
<style>
.iqamahTable {
  margin: 0 0 40px;
  width: 100%;
  font-size: 1.5rem;
  border-style:none;
   border-collapse: collapse;" border="0" cellspacing="0" cellpadding="0" width="100%"
}



.iqamahTable table, th, td {

    border-right-style: none !important;

}


table.myTable {

    border-collapse: collapse ;

}

.hightlight {
    background: #81d742 !important;
    color: #f7f7f7;
}

#salahTimer {
  text-align: center;
}
</style>
<body>
  <h3 id="salahTimer"></h3>
  <table class="iqamahTable">
      <thead>
        <tr class="">
          <td colspan="4"><center class="currentDate"></center></td>
        </tr>
      </thead>
      <tbody>

        <tr value="05:45" class="salah">
          <td><center>Fajr</center></td>
          <td><center>üåÖ</center></td>
          <!-- <td><center>5:18</center></td> -->
          <td colspan="2"><center>5:45 AM</center></td>
        </tr>


        <tr value="06:31" class="salah">
          <td><center>Sunrise</center></td>
          <td><center>üåÑ</center></td>
          <td colspan="2"><center>6:31 AM</center></td>
        </tr>

        <tr value="14:00" class="salah">
          <td><center>Dhuhr</center></td>
          <td><center>‚òÄÔ∏è</center></td>
          <!-- <td><center>1:19</center></td> -->
          <td colspan="2"><center>2:00 PM</center></td>
        </tr>

        <tr value="18:15" class="salah">
          <td><center>Asr</center></td>
          <td><center>üåá</center></td>
          <!-- <td><center>4:55</center></td> -->
          <td colspan="2"><center>6:15 PM</center></td>
        </tr>

        <tr value="20:07" class="salah">
          <td><center>Magrib</center></td>
          <td><center>üåÜ</center></td>
          <!-- <td><center>8:07</center></td> -->
          <td colspan="2"><center>8:07 PM</center></td>
        </tr>


        <tr value="21:45" class="salah">
          <td><center>Isha</center></td>
          <td><center>üåÉ</center></td>
          <!-- <td><center>9:20</center></td> -->
          <td colspan="2"><center>9:45 PM</center></td>
        </tr>


          <tr class="">
            <td colspan="2"></td>
            <td><center>Khutbah</center></td>
            <td><center>Iqamah</center></td>
          </tr>
          <tr class="">
            <td><center>Jummah</center></td>
            <td><center>‚ò™Ô∏è</center></td>
            <td><center>1:30</center></td>
            <td><center>2:00</center></td>
          </tr>

      </tbody>
    </table>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
// https://stackoverflow.com/questions/8207655/how-to-get-time-of-specific-timezone-using-javascript
// A bit buggy, so commented out for now...consider deleting, and let it be an outstanding bug

// function calcTime(offset) {
//     // create Date object for current location
//     var d = new Date();

//     // convert to msec
//     // subtract local time zone offset
//     // get UTC time in msec
//     var utc = d.getTime() - (d.getTimezoneOffset() * 60000);

//     // create new Date object for different city
//     // using supplied offset
//     var nd = new Date(utc + (3600000*offset));

//     // return time as a string
//     return nd;
// }

// Code from "Iqamah Table" Wordpress Plugin, licensed under GPL 2.0

$(document).ready(function() {

  var $isNotFajr = false;

  var months = {
    0: "January",
    1: "Feburary",
    2: "March",
    3: "April",
    4: "May",
    5: "June",
    6: "July",
    7: "August",
    8: "September",
    9: "October",
    10: "November",
    11: "December"
  }

  var daysOfWeek = {
    0: "Sunday",
    1: "Monday",
    2: "Tuesday",
    3: "Wednesday",
    4: "Thursday",
    5: "Friday",
    6: "Saturday"
  }

  function pad(d) {
    return (d < 10) ? '0' + d.toString() : d.toString();
  }

  function toMidnight(hours) {
    console.log(hours);
    return (2400 - hours)
  }

  var now = new Date();

  var hourString = pad(now.getHours())+""+pad(now.getMinutes());

  var hours = parseInt(hourString);

  var dayOfWeek = daysOfWeek[now.getDay()];
  var month = months[now.getMonth()];
  var date = now.getDate();

  var currentDate = dayOfWeek + ", " + month + " " + date

  var timeRemaining;

  function timeInIntegerFormat(pla) {
    var string = pla.replace(":","");
    var integer = parseInt(string)
    return integer
  }

  jQuery(".currentDate").html(currentDate)

  jQuery("table.iqamahTable").each(function(i,v){
    var fajrDiv = jQuery(this).find("tbody  > tr:first")
    fajrDiv.addClass("hightlight");
    pla = timeInIntegerFormat(jQuery(fajrDiv).attr("value"));
    console.log(pla);
    console.log(hours);

    if (pla >= hours) {
      console.log("entering into PLA >= Hours branch");
      timeRemaining = (hours - pla);
    } else {
      console.log("entering into PLA <= Hours branch");
      timeRemaining = (toMidnight(hours) + pla);
    }
  });

  jQuery("table.iqamahTable").each(function(i,v){

    jQuery(this).find("tbody  > tr.salah").each(function(i,v){
      var pla = timeInIntegerFormat(jQuery(this).attr("value"));
      if(pla >= hours) {
        timeRemaining = (hours - pla);
        jQuery(this).addClass("hightlight");
        jQuery(".iqamahTable > tbody  > tr:first").removeClass("hightlight");
        $isNotFajr=true;
        return false;
      }
    });
  });

  if($isNotFajr) {
    jQuery("table.iqamahTable").each(function(i,v){
      jQuery(this).find("tbody  > tr:first").removeClass("hightlight");
    });
  }

  console.log(timeRemaining);

  function startTimer(duration, display) {
    console.log("the duration is " + duration)
      setInterval(function () {
          var hours = Math.floor(duration / 3600);
          var minutes = Math.floor(duration % 3600 / 60);
          var seconds = Math.floor(duration % 3600 % 60);

          // hours = hours < 1 ? "0" : (hours);
          // minutes = minutes < 10 ? "0": minutes;
          // seconds = seconds < 10 ? "0" : seconds;

          if (duration >= 0)
          {
            display.text(pad(hours) + ":" + pad(minutes) + ":" + pad(seconds));
          } else {
            display.text("00:00:00");
          }

          duration--;
      }, 1000);
  }

  display = $('#salahTimer');
  startTimer(timeRemaining * 60, display);
});


/*

function startTimer(duration, display) {
    var start = Date.now(),
        diff,
        minutes,
        seconds;
    function timer() {
        // get the number of seconds that have elapsed since
        // startTimer() was called
        diff = duration - (((Date.now() - start) / 1000) | 0);

        // does the same job as parseInt truncates the float
        minutes = (diff / 60) | 0;
        seconds = (diff % 60) | 0;

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (diff <= 0) {
            // add one second so that the count down starts at the full duration
            // example 05:00 not 04:59
            start = Date.now() + 1000;
        }
    };
    // we don't want to wait a full second before the timer starts
    timer();
    setInterval(timer, 1000);
}

window.onload = function () {
    var fiveMinutes = 60 * 5,
        display = document.querySelector('#time');
    startTimer(fiveMinutes, display);
};



(function ($) {
    function startTimer(duration, display) {
       var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);
        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.html = minutes + ":" + seconds;

        if (--timer < 0) {
            timer = duration;
        }
    }, 1000);
   }

    $(document).ready(function() {
         var fiveMinutes = 60 * 5;
         var display = $('.salahTimer');
         startTimer(fiveMinutes, display);
         console.log(fiveMinutes);
    });

})(jQuery);
*/
</script>
</html>